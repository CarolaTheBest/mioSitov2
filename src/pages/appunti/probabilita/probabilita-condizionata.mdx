---
layout: "../../../layouts/PostsLayout.astro"
---

# Probabilità condizionata

Vogliamo calcolare la probabilità che tengano conto di _informazioni parziali_ sull'esito dell'esperimento.

Cosa si intende con _informazioni parziali_. Per spiegarlo facciamo un esperimento:

_lancio 2 dadi_ (con il concetto che posso distinguerli, per esempio uno è rosso o e blu. In questo caso scegliamo l'ordine)

Cosa vuol dire informazioni parziali?

In questo caso potrebbe essere: "la somma fa 9"

$\Omega = \{ (i,j) \}$ con `i` = lancio il primo dado, `j` = lancio il secondo. $i,j = \{ 1,2,3,4,5,6 \}$

$\#\Omega = 36$

$\mathbb P(A) = \frac{\#A}{\#\Omega} = \frac{4}{36} = \frac{1}{9}$

$A = \{ (4,5), (5,4), (3,6), (6,3) \}

---

$B =$ "il primo dado ha dato 6"

$\mathbb P(B) = \frac{6}{36} = \frac{1}{6}$

---

Ora immaginiamo che un omino ci dica che vedendo che con il primo esca 6. Ora quante probabilità ci sono che la sua somma faccia 9?

Le informazioni parziali delle _condizioni_ nel quale noi dobbiamo creare una nuova $\mathbb P$. Come notazione per indicare la nuova $\mathbb P$ si indica con $\mathbb P(A | B)$ che significa: "la $\mathbb P$ dato $B$". Spiegato a parole: "calcolare la probabilità dell'evento di $A$ con la condizione di $B$"

:::def
Dato $(\Omega, \mathbb P)$ e $B$ _evento_ definisco probabilità condizionata a $B$. Indico con $\mathbb P(* | B)$ la seguente funzione:

$$
\mathbb P(* |B): \mathbb P(\Omega) \longrightarrow \Omega \qquad A -> \mathbb P(A | B) = \frac{\mathbb P(A unito B)}{B}
$$

a patto che:

$$
\frac{
\mathbb P(B)}{0}
$$

:::

Continuando l'esempio:

$P(A \cap B) = \frac{\#A \cap B}{\# \Omega} = \frac{1}{36}$
$A 1cap B = \{ (6,3) \}$
$\mathbb P(B) = \frac{6}{36}$
$\mathbb (A|B) = \frac{\mathbb P(A \cap B)}{\mathbb P(B)} = \frac{1}{6}$

$C =$ "il primo dado ha fatto 1"

$$
\mathbb P(A |C) = \frac{a unito C}{\mathbb P} = \frac{0}{\frac{6}{36}} = 0
$$

---

## La probabilità condizionata è ben definita?

Per scoprirlo dobbiamo vedere che le 3 regole della probabilità valgano.

1. _La $\mathbb P(A | B) \geq 0$_? $\forall A \mathbb P(A | B) = \frac{\mathbb P(A unito b)}{\mathbb P(B) \geq 0}$
2. $\mathbb P(\Omega | B) = 1$ (la somma di tutte le partizioni risulterà 1)?
   $\mathbb P(\Omega | B)= \frac{\Omega \cap B}{\mathbb P(B)} = \frac{\mathbb P(B)}{\mathbb P(B)} = 1$
3. $A_1$ e $A_2$ con $A_2$ intersecato $A_1 = \emptyset$ (la legge dei singoletti) $\mathbb P(A_1 \cap A_2 | B) = \mathbb P(A_1 | B) + \mathbb P(a_2 | B)$? Dato che $A_1$ e $A_2$ sono disgiunti anche l'intersezione con $\mathbb B$ sarà disgiunta.

Il punto è che prima avevo $(/Omega, \mathbb P)$ ho definito una nuova misura di probabilità su $\Omega$ che ho chiamato $\mathbb P(* | B)$

osservazione:

$$
\mathbb P(A | B) = \frac{\mathbb P(A \cap B)}{\mathbb P(B)}
$$

$$
\mathbb P(B) \cdot \mathbb P(A | B) = \mathbb P(B) \cdot \frac{\mathbb P(A \cap B)}{\mathbb P(B)}
$$

$$
(*)\qquad \mathbb P(A \cap B) = \mathbb P(A | B) \cdot \mathbb P(B)
$$

regola generalizzata: **regola della moltiplicazione**

Per 3 eventi: $A_1, A_2, A_3$

(\*\*) $\mathbb P(A_1 \cup A_2 \cup A_3) = \mathbb P(A_3 | A_1 \cap A_2) \cdot \mathbb P(A_2 | A_1) \cdot \mathbb P(A_1)$

Appello a (\*) con:

$A = A_3$

$B = A_1 \cap A_2$

$\mathbb P(A_3 \cap A_1 \cap A_2) = \mathbb P(A_3 | A_1 \cap A_2) \cdot \mathbb (A_1 \cap A_2)$

## Formula delle probabilità totali

:::def
Dato $(A)^n_{i = 2}$ partizione di $\Omega$

$\mathbb P(B) = \Sigma^2_{i = 2} \mathbb (B \cap Ai) = \Sigma \mathbb (B|Ai) \cdot \mathbb P(A_i)$
:::

Il risultato del nostro calcolo delle probabilità è un insieme formato da insiemi a due a due disgiunti. Se voglio calcolare l'unione con la nuova formula posso usare quella sopraindicata.

## Teorema di Bayes

Dati $A$ e $B$ eventi:

$$
    \mathbb P(A|B) = \frac{\mathbb P(B|A) \cdot \mathbb P(A)}{\mathbb P(B)} = \frac{\mathbb P(B \cap A)}{\mathbb P(B)} = \frac{\mathbb P(B|A) \mathbb P(A)}{\mathbb P(B)}
$$

Se gli $(Ai)^n_{i = 2}$ sono partizione di $\Omega$

$$
 \mathbb P(Ai | B) = \frac{\mathbb P(B|Ai)\mathbb (Ai)}{\sigma^n_{i=i} \mathbb P(B|Ai) \mathbb (Ai)}
$$

## Esercizi

_lancio una moneta equa 3 volte. Sia $A$ l'evento "escono più teste che croci" e sia $B$ l'evento "il primo lancio restituisce testa". <br/> Calcolare la probabilità di $A$ e la probabilità di $A$ dato $B$_

$A =$ "escono più teste che croci"

$\Omega = \{ (w_1, w_2, w_3) \quad w_i \in \{ t,c \} \}$

$\#\Omega = 2^3 = 8$

Posso usare l'uniforme discreta perché la moneta è equa e $\Omega$ è finita

$\mathbb P(A) = \frac{\#A}{\#\Omega} = \frac{4}{8} = \frac{1}{2}$

---

B

$$
\mathbb P(A|B)= \frac{\mathbb P(A \cap B)}{\mathbb P(B)} = \frac{\frac{\#A \cap B}{\# \Omega}}{\frac{\#B}{\#\Omega}}= \frac{3}{4}
$$

---

### Esercizio 2

_Estraggo 3 carte da un mazzo regolare di 52 senza reibussolamento.<br/> Calcolare la probabilità che nessuna delle 3 carte sia di cuori_

13 carte per seme. Semi = `Quadri, Cuori, Pichhe, Fiori`.

Ci sono due vie: **in blocco** e **successive**. In blocco: prendo 3 carte insieme, successive: ci sarà una prima estrazione, poi una seconda e così via.

#### Risoluzione in blocco

$A =$ non ci sono cuori

$$
\mathbb P(A) = \frac{\binom{39}{3} \binom{13}{0}}{\binom{52}{3}} = \frac{\binom{19}{3}}{\binom{52}{3}}
$$

Da notare $\binom{13}{0}$ che significa "prendo 0 carte (di cuori) da 13 carte totali (di cuori)"

### Estrazioni successive

Usando le probabilità condizionate posso risolvere questo problema.

$A =$ "non estraggo cuori"

$A_1 =$ "non estraggo cuori alla prima estrazione"

$A_2 =$ = "...."

$A= A_1 \cap A_2 \cap A_3$ da intersecare perchè nella prima estrazione non _ti interessa_ cosa ci sarà nella seconda estrazione e nella seconda non _ti interessa_ la terza estrazione e così via, per formare un sottoinsieme del genere bisogna intersecare.

Prima estrazione:

$$
\mathbb (A_1) = \binom{39}{52}
$$

39 sono tutte le carte escluse quelle di cuori.

Seconda estrazione:

Se alla prima è uscito un non cuori allora la $\mathbb P$ di $A_2$ è:

$$
\mathbb P(A_2 | A_1) = \binom{38}{51}
$$

Per calcolare $\mathbb P(A_2)$ posso usare le forumle delle $\mathbb P$ totali?

Dato che è $A_1$ e $A_1^c$ sono partizione di $\Omega$? La risposta è si.

Ora riscrivo la formula della probabilità totale:

$$
\mathbb P(A_2) = \mathbb P(A_2 | A_2) \mathbb P(A)

\\

\mathbb P(A_1 \cap A_2 \cap A_3) =\\
 P(A_3 | A_1 \cap A_2)\cdot \mathbb P(A_2 | A_1) \cdot \mathbb (A_1) =\\
  \binom{37}{50} \cdot \binom{38}{51} \cdot \binom{39}{52}
$$

s
